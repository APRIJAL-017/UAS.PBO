const productSpecs = {
    //Spesifikasi Honda
    //1
    "Honda CBR 250RR": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "250cc",
        warna: "Hitam Merah",
        Transmisi: "Manual, 5-Speed"
    },
    //2
    "CRF150L": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "150cc",
        warna: "Merah Putih",
        Transmisi: "Manual, 5-Speed"
    },
    //3
    "CB150R Streetfire": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "150cc",
        warna: "Merah Metalic",
        Transmisi: "Manual, 6-Speed"
    },
    //4
    "Beat Deluxe": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "110cc",
        warna: "Biru Dof",
        Transmisi: "Otomatis"
    },
    //5
    "Vario 160": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "160cc",
        warna: "Biru Dof",
        Transmisi: "Otomatis"
    },

    //Spesifikasi Yamaha
    //1
    "Yamaha Aerox Alpha": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "150cc",
        warna: "Biru Merah",
        Transmisi: "Otomatis"
    },
    //2
    "Yamaha NMAX Neo": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "150cc",
        warna: "Putih",
        Transmisi: "Otomatis"
    },
    //3
    "Yamaha R15M ABS": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "155.09 cc",
        warna: "Hitam Silver",
        Transmisi: "Manual, 6-Speed"
    },
    //4
    "Yamaha WR155R": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "155cc",
        warna: "Biru",
        Transmisi: "Manual, 6-Speed"
    },
    //5
    "Fazzio Hybrid Neo": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "125cc",
        warna: "Pink Mauve",
        Transmisi: "Otomatis"
    },

    //Spesifikasi Suzuki
    //1
    "Suzuki GSX-R150": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "150cc",
        warna: "Biru ",
        Transmisi: "Manual, 6-Speed"
    },
    //2
    "Suzuki NEX_II": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "113cc",
        warna: "Biru Hitam",
        Transmisi: "Otomatis"
    },
    //3
    "Suzuki Satria F150 NEW": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "150 cc",
        warna: "Hitam Metalic",
        Transmisi: "Manual, 6-Speed"
    },
    //4
    "Suzuki VSTROM 250 SX": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "250cc",
        warna: "Kuning",
        Transmisi: "Manual, 6-Speed"
    },
    //5
    "Suzuki NEX CROSSOVER": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "113cc",
        warna: "Biru Hitam",
        Transmisi: "Otomatis"
    },

    //Spesifikasi Vespa
    //1
    "Vespa Sprint 150 ABS": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "150cc",
        warna: "Kuning",
        Transmisi: "Otomatis"
    },
    //2
    "Vespa Sprint S 150 ABS": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "113cc",
        warna: "Biru",
        Transmisi: "Otomatis"
    },
    //3
    "Vespa GTS CLASSIC 150 ABS": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "150 cc",
        warna: "Hitam Vulacano",
        Transmisi: "Otomatis"
    },
    //4
    "Vespa GTS Super Tech 300": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "300cc",
        warna: "Grey Mett",
        Transmisi: "Otomatis"
    },
    //5
    "Vespa Primavera 150 ABS": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "150cc",
        warna: "Green Amabile",
        Transmisi: "Otomatis"
    },


    //Spesifikasi Kawasaki
    //1
    "Kawasaki NINJA 250 ABS": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "250cc",
        warna: "Hijau",
        Transmisi: "Manual, 6-Speed"
    },
    //2
    "Kawasaki KLX230R S": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "230cc",
        warna: "Hijau",
        Transmisi: "Manual, 6-Speed"
    },
    //3
    "Kawasaki W175R": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "177cc",
        warna: "Kuning",
        Transmisi: "Manual, 5-Speed"
    },
    //4
    "Kawasaki NINJA H2": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "1000cc",
        warna: "Mirror Coated Spark Black",
        Transmisi: "Manual, 6-Speed"
    },
    //5
    "Kawasaki VULCAN S": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "650cc",
        warna: "Hitam Metallic",
        Transmisi: "Manual, 6-Speed"
    },

    //Spesifikasi KTM
    //1
    "KTM Duke 200": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "200cc",
        warna: "Putih Metallic",
        Transmisi: "Manual, 6-Speed"
    },
    //2
    "KTM RC 250": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "250cc",
        warna: "Orange Putih",
        Transmisi: "Manual, 6-Speed"
    },
    //3
    "KTM RC 200": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "200cc",
        warna: "Hitam Putih",
        Transmisi: "Manual, 6-Speed"
    },
    //4
    "KTM 450 SX-F": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "450cc",
        warna: "Orange",
        Transmisi: "Manual, 5-Speed"
    },
    //5
    "KTM 250 SX-F": {
        surat: "Lengkap",
        pajak: "Hidup",
        cc: "250cc",
        warna: "Orange (Decal Kuning Ungu)",
        Transmisi: "Manual, 5-Speed"
    },

};

let cart = [];

function showMainSection() {
    document.getElementById('splash-screen').style.display = 'none';
    document.getElementById('main-section').style.display = 'block';
}

function toggleCart() {
    const cartSection = document.getElementById('cart');
    cartSection.style.display = cartSection.style.display === 'block' ? 'none' : 'block';
    renderCart();
}

function showSpecs(productName) {
    const modal = document.getElementById("spec-modal");
    const specTitle = document.getElementById("spec-title");
    const specDetails = document.getElementById("spec-details");

    const specs = productSpecs[productName];

    if (specs) {
        specTitle.textContent = `Spesifikasi: ${productName}`;
        specDetails.innerHTML = `
            <ul id="spec-list">
                <li><span class="label">Surat-Surat</span>: ${specs.surat}</li>
                <li><span class="label">Pajak</span>: ${specs.pajak}</li>
                <li><span class="label">CC Mesin</span>: ${specs.cc}</li>
                <li><span class="label">Warna</span>: ${specs.warna}</li>
                <li><span class="label">Transmisi</span>: ${specs.Tranmisi}</li>
            </ul>
        `;
        modal.style.display = "flex";
    } else {
        specDetails.innerHTML = "<li>Spesifikasi tidak tersedia.</li>";
    }
}

function closeSpecs() {
    document.getElementById("spec-modal").style.display = "none";
}

function addToCart(product, price) {
    if (!price || price <= 0) {
        Swal.fire({
            title: "Harga Tidak Valid",
            text: "Harga produk tidak valid!",
            icon: "error",
            confirmButtonText: "OK"
        });
        return;
    }
    cart.push({ product, price });
    Swal.fire({
        title: "Berhasil!",
        text: `${product} telah ditambahkan ke keranjang.`,
        icon: "success",
        confirmButtonText: "OK"
    });
}

function renderCart() {
    const cartItems = document.getElementById('cart-items');
    const total = document.getElementById('total');

    if (cart.length === 0) {
        cartItems.innerHTML = '<p>Keranjang Anda kosong.</p>';
        total.innerHTML = '<p>Total: Rp0</p>';
        return;
    }

    let cartHTML = '';
    let totalPrice = 0;

    cart.forEach((item, index) => {
        cartHTML += `<div>${item.product} - Rp${item.price.toLocaleString()}
        <button onclick="removeFromCart(${index})">Hapus</button></div>`;
        totalPrice += item.price;
    });

    cartItems.innerHTML = cartHTML;
    total.innerHTML = `<p>Total: Rp${totalPrice.toLocaleString()}</p>`;
}

function removeFromCart(index) {
    Swal.fire({
        title: "Yakin ingin menghapus?",
        text: "Item ini akan dihapus dari keranjang.",
        icon: "warning",
        showCancelButton: true,
        confirmButtonColor: "#3085d6",
        cancelButtonColor: "#d33",
        confirmButtonText: "Ya, hapus!"
    }).then((result) => {
        if (result.isConfirmed) {
            cart.splice(index, 1);
            renderCart();
            Swal.fire({
                title: "Berhasil!",
                text: "Item berhasil dihapus dari keranjang.",
                icon: "success",
                confirmButtonText: "OK"
            });
        }
    });
}

function checkout() {
    if (cart.length === 0) {
        Swal.fire({
            title: "Keranjang kosong",
            text: "Tambahkan produk untuk melanjutkan.",
            icon: "info",
            confirmButtonText: "OK"
        });
        return;
    }

    Swal.fire({
        title: "Checkout Berhasil!",
        text: "Terima kasih atas pembelian Anda di Zull Motor!",
        icon: "success",
        confirmButtonText: "OK"
    });
    cart = [];
    renderCart();

    if (!specs) {
        Swal.fire({
            title: "Error",
            text: "Produk tidak ditemukan!",
            icon: "error",
            confirmButtonText: "OK"
        });
        return;
    }
}

function filterProducts(category) {
    const allProducts = document.querySelectorAll('.product');
    allProducts.forEach(product => {
        if (category === 'all' || product.classList.contains(category)) {
            product.style.display = 'block';
        } else {
            product.style.display = 'none';
        }
    });
}

function closeCart() {
    document.getElementById("cart").style.display = "none";
}

function saveCart() {
    localStorage.setItem('cart', JSON.stringify(cart));
}

function loadCart() {
    const savedCart = localStorage.getItem('cart');
    cart = savedCart ? JSON.parse(savedCart) : [];
    renderCart();
}

//baru
if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('./service-worker.js')
        .then(registration => {
            console.log('Service Worker registered with scope:', registration.scope);
        })
        .catch(error => {
            console.error('Service Worker registration failed:', error);
        });
}
